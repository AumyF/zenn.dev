---
title: "TypeScriptã§ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹å…¥é–€"
emoji: "ğŸ‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TypeScript", "é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "Rust", "Elm"]
published: false
---

**ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹** (Algebraic Data Type) ã¯é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ã‚ˆãã‚ã‚‹è¨€èªæ©Ÿèƒ½ã§ã™ã€‚ä½•ãŒã§ãã‚‹ã‹ã¨ã„ã†ã¨â€¦ _ç›´å’Œã®ç›´ç©_ ã¨è¨€ã†ã®ã¯ã‹ã‚“ãŸã‚“ãªã‚“ã§ã™ã‘ã©â€¦å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’è¦‹ãŸã»ã†ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

# n å€‹ã®å€¤ã‚’ã‚‚ã¤å‹

n å€‹ã®å€¤ã‚’ã‚‚ã¤å‹

## 1 å€‹ã®å€¤ã‚’ã‚‚ã¤å‹

1 å€‹ã®å€¤ã‚’ã‚‚ã¤å‹ã¯æ„å¤–ã¨ã‚ã‚Šãµã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã£ã¨ã‚‚ä»£è¡¨çš„ãªã‚‚ã®ãŒ `null` ã§ã™ã­ã€‚TS ãªã‚‰ `undefined` ã‚‚åŠ ã‚ã‚Šã¾ã™ã€‚

```ts
const hoge: null = null;
const fuga: undefined = undefined;
```

`null` ã‚’ç›´æ¥å‹ã«æ›¸ã‘ã‚‹è¨€èªã‚‚ãã†å¤šããªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚

é–¢æ•°å‹ã¨ã‚ˆã°ã‚Œã‚‹è¨€èªã§ã¯ `null` ã®ä»£ã‚ã‚Šã«ç©ºã‚¿ãƒ—ãƒ«ã‚„ç©ºãƒªã‚¹ãƒˆã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™ã€‚ä¾‹ã¯ Rust ã§ã™ãŒ Scala ã‚„ Haskell ã‚‚ãŸã—ã‹ãã†ã§ã™ã€‚

```rust
let point: (i32, i32) = (4, 2); // 2è¦ç´ ã‚¿ãƒ—ãƒ«
let unit: () = (); // ç©ºã‚¿ãƒ—ãƒ«
```

TypeScript ã§ã¯é…åˆ—ã‚’ä½¿ã£ã¦ã‚¿ãƒ—ãƒ«ã£ã½ã„ã“ã¨ãŒå®Ÿç¾ã§ãã€`[]` ã‚ã‚‹ã„ã¯ `never[]` å‹ãŒå”¯ä¸€ã®å€¤ `[]` ã‚’ã‚‚ã¤å‹ã«ãªã‚Šã¾ã™ã€‚

ã•ã‚‰ã« TypeScript ã«ã¯ **ãƒªãƒ†ãƒ©ãƒ«å‹** ã¨ã„ã†ãƒ¤ãƒã’ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚`42` ã¨ã‹ `"hello"` ã¨ã„ã£ãŸæ•°å€¤ã‚„æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ãã®ã‚‚ã®ã‚’å‹ã«ã§ãã€ã‚‚ã¡ã‚ã‚“ `42` å‹ã«ã¯ `42` ã—ã‹å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€å‹ã®ã‚‚ã¤å€¤ãŒ 1 ã¤ãªã‚“ã§ã™ã­ã€‚æ•°å€¤ãŒå°æ•°ãµãã‚ãŸãã•ã‚“ã€æ–‡å­—åˆ—ãŒãªã‚“ã‹ã™ã”ã„ãŸãã•ã‚“ã‚ã£ã¦å‡„ã¾ã˜ã„æ•°ã® $1$ å‹ã‚’ã¤ãã‚‹ã“ã¨ãŒã§ãã¾ã™ã­ã€‚

$1$ å‹ã® `undefined` ã¨ `null` ã‚’ç›¸äº’å¤‰æ›ã™ã‚‹é–¢æ•°ã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ts
const from = (und: undefined) => null;
const to = (nul: null) => undefined;
```

ã¨ã“ã‚ã§ã“ã®é–¢æ•°ã‚’ 2 å€‹ã¤ãªã’ã¦å€¤ã‚’æ¸¡ã™ã¨å…ƒã«æˆ»ã‚Šã¾ã™ã‚ˆã­ã€‚

```ts
from(to(null)); // => null
to(from(undefined)); // => undefined
```

:::details ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ¼”ç®—å­ã‚’ä½¿ã†ã¨
TC39 ã§ ECMAScript ä»•æ§˜ã«å…¥ã‚Œã‚‹ã‹æ¤œè¨ä¸­ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ¼”ç®—å­ã‚’ä½¿ã†ã¨ã“ã‚“ãªæ„Ÿã˜ã§ãŸãã•ã‚“é–¢æ•°ã‚’é€£ã­ã¦æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```ts
undefined |> from |> to |> from |> to |> from |> to; // undefined
null |> to |> from |> to |> from |> to |> from; // undefined
```

ã©ã‚Œã ã‘é‡ã­ã¦ã‚‚æƒ…å ±ã®ãƒ­ã‚¹ãªãã‚‚ã¨ã®å€¤ã«æˆ»ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ¼”ç®—å­ã‚‚ã£ã¨æœ‰åã«ãªã£ã¦å…¥ã‚Œã¦ã»ã—ã„ã®å£°ãŒå¢—ãˆã¦ãã‚Œãªã„ã‹ãªï½ï½ã¨ã„ã†å®£ä¼ã§ã—ãŸã€‚
:::

ã“ã‚Œã¯æ•°å­¦çš„ã«å‹ã‚’é›†åˆã€é–¢æ•°`from`, `to`ã‚’å°„ã¨ã—ã¦è€ƒãˆã¦ **åŒå‹** ã¨å‘¼ã³ã¾ã™ã€‚`null` ã¨ `undefined` ãŒãã‚Œãã‚ŒæŒã¦ã‚‹æƒ…å ±é‡ã¯ã©ã¡ã‚‰ã‚‚ 1 ã¤ã§ã™ã€‚

ã‚‚ã¡ã‚ã‚“ `"hello"` ã¨ `undefined` ã¨ `42` ã¨ `[]` ã‚‚åŒå‹ã§ã™ã€‚

## 0 å€‹ã®å€¤ã‚’ã‚‚ã¤å‹

æ•°å­¦çš„ãªæ–‡è„ˆã ã¨ _0 å€‹ã®å€¤ã‚’ã‚‚ã¤å‹_ ã¨ã„ã†ã‚ˆã†ãªè¨€ã„å›ã—ãŒé »å‡ºã™ã‚‹ã“ã¨ã‹ã¨æ€ã„ã¾ã™ãŒã€ **å€¤ã‚’ã‚‚ãŸãªã„** ã¨ã„ã†ã“ã¨ã§ã™ã€‚å€¤ã‚’ã‚‚ãŸãªã„å‹ãªã‚“ã¦ã‚ã‚‹ã®ã‹ã¨æ€ã„ãŸããªã‚Šã¾ã™ãŒ TypeScript ã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ã‚ã‚Šã¨é­é‡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚`never` å‹ã¨å‘¼ã°ã‚Œã¦ãŠã‚Šã€ãŠãŠã‚ˆãã®æ„å‘³åˆã„ã¯ã€Œãã“ã«å€¤ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã“ã¨ã¯ **ã‚ã‚Šãˆãªã„**ã€ã§ã™ã€‚

å¿…ãš `throw` ã™ã‚‹é–¢æ•°ã¯æ­£å¸¸çµ‚äº†ã—ã¦å€¤ã‚’è¿”ã™ã“ã¨ãŒçµ¶å¯¾ã«ã‚ã‚Šãˆãªã„ãŸã‚è¿”ã‚Šå€¤ã®å‹ã¯ `never` ã§ã™ã€‚

```ts
// () => never
const panic = () => {
  throw new Error();
};
```

ã¾ãŸã¯ãƒ­ã‚¸ãƒƒã‚¯ä¸Šãã“ã‚’é€šã‚‹ã“ã¨ãŒã‚ã‚Šãˆãªã„å ´åˆã«ã¯å¤‰æ•°ãŒ `never` ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼è§£æã¨ã„ã£ã¦ `if(typeof hoge === "number") { }` ãŒçœŸã®ã¨ãã®åˆ†å²ã§ã¯ `hoge` ã‚’è‡ªå‹•ã§ `number` å‹ã«æ¨è«–ã—ã¦ãã‚Œã‚‹ãŠã°ã‘ã®ã‚ˆã†ãªæ©Ÿèƒ½ã§ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ `strOrNum` ãŒ `string` `number` ã§ã‚ã‚‹ä»¥ä¸Š `switch` ã®ã‚¢ãƒ¼ãƒ ã¯ä¸Š 2 ã¤ã®ã©ã£ã¡ã‹ã«å¿…ãšãƒ’ãƒƒãƒˆã™ã‚‹ãŸã‚ `default` ç¯€ãŒèµ°ã‚‹ã“ã¨ã¯ã‚ã‚Šãˆãªã„^[`any` ã‚’æ¸¡ã™ä¸å±Šãè€…ãŒã„ãŸå ´åˆã¯åˆ¥ã§ã™]ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒç†è§£ã—ã¦ãã‚Œã¾ã™ã€‚

```ts
const fuga = (strOrNum: string | number) => {
  switch (typeof strOrNum) {
    case "string":
      return strOrNum.length; // ã“ã“ã§ã¯string
    case "number":
      return strOrNum; // number
    default:
      console.log(strOrNum); // never(ã“ã“ã¯é€šã‚‰ãªã„ã¯ãš)
      return 0;
  }
};
```

## 2 å€‹ã®å€¤ã‚’ã‚‚ã¤å‹

TypeScript ã«é™ã‚‰ãšã€Œ2 å€‹ã®å€¤ã‚’ã‚‚ã¤å‹ãŒã‚ã‚‹ã€è¨€èªã¯éå¸¸ã«å¤šã„ã§ã™ã€‚C ã§ã‚‚ Java ã§ã‚‚ Rust ã§ã‚‚ Ruby ã§ã‚‚å­˜åœ¨ã—ã¾ã™ã€‚ãã†ã§ã™ã€boolean (çœŸå½å€¤) å‹ã§ã™ã€‚ã‚ã‚Œã¯ `true` ã‹ `false` ã§ã€ãã‚Œä»¥å¤–ã®å€¤ã‚’ã¨ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

# åˆ—æŒ™å‹

æœ€åˆã®ä¾‹ã¯ Rust ã§ã™ã€‚ã„ããªã‚Šé–¢æ•°å‹ã‹å¾®å¦™ãªãƒ©ã‚¤ãƒ³ã§ã™ãŒã€å°‘ãªãã¨ã‚‚ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã¯é–¢æ•°å‹ã®ãã‚Œã ã¨æ€ã„ã¾ã™ã€‚

IP(Internet Protocol) ã«ã¯ v4 ã¨ v6 ã® 2 ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚Šã€IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚‚ 2 ã¤ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã‚ˆã­ã€‚ã“ã‚Œã‚’ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```rust
enum IPAddr {
	V4,
	V6,
}
```

`V4`, `V6` ã¨ã„ã†æ–°ã—ã„å€¤ã¨ã€2 ã¤ã‚’å«ã‚€é›†åˆ (å‹) ã¨ã—ã¦ `IPAddr` ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚1 å€‹ã§ IPv4, IPv6 ã®ä¸¡æ–¹ã« ping ã§ãã‚‹é–¢æ•°ã¯ã“ã‚“ãªæ„Ÿã˜ã§æ›¸ã‘ãã†ã§ã™ã€‚

```rust
fn ping(ip_version: IPAddr, ip_address: String) {
	match(ip_version) {
		IPAddr::V4 => ping4(ip_address),
		IPAddr::V6 => ping6(ip_address),
	}
}
```
